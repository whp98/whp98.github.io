import{_ as i,c as a,o as n,ag as p}from"./chunks/framework.DWdSXOaE.js";const F=JSON.parse('{"title":"Windows使用cygwin编译运行haproxy","description":"","frontmatter":{},"headers":[],"relativePath":"生活记录/Windows使用cygwin编译运行haproxy.md","filePath":"生活记录/Windows使用cygwin编译运行haproxy.md","lastUpdated":1726751882000}'),h={name:"生活记录/Windows使用cygwin编译运行haproxy.md"};function l(t,s,e,k,r,d){return n(),a("div",null,[...s[0]||(s[0]=[p(`<h1 id="windows使用cygwin编译运行haproxy" tabindex="-1">Windows使用cygwin编译运行haproxy <a class="header-anchor" href="#windows使用cygwin编译运行haproxy" aria-label="Permalink to &quot;Windows使用cygwin编译运行haproxy&quot;">​</a></h1><p><a href="https://www.jianshu.com/p/d436a3e73d2f" target="_blank" rel="noreferrer">原文</a></p><h2 id="_1-安装-cygwin" tabindex="-1">1.安装 cygwin <a class="header-anchor" href="#_1-安装-cygwin" aria-label="Permalink to &quot;1.安装 cygwin&quot;">​</a></h2><p>1.1.下载cygwin(<a href="https://cygwin.com/install.html" target="_blank" rel="noreferrer">https://cygwin.com/install.html</a>)</p><p>1.2.安装cygwin(如果你没用过cygwin,安装程序打开后默认下一步)</p><p>1.3.再设置下载源的时候简易使用网易源(<a href="http://mirrors.163.com/cygwin/" target="_blank" rel="noreferrer">http://mirrors.163.com/cygwin/</a>):</p><p>1.4 点击devel 设置安装</p><p>1.5 搜索安装make工具</p><h2 id="_2-编译安装-haproxy" tabindex="-1">2.编译安装 haproxy <a class="header-anchor" href="#_2-编译安装-haproxy" aria-label="Permalink to &quot;2.编译安装 haproxy&quot;">​</a></h2><p>2.1.下载haproxy (<a href="http://www.haproxy.org/download/" target="_blank" rel="noreferrer">http://www.haproxy.org/download/</a>) , 我下载的是 haproxy-1.7.5.tar.gz</p><p>2.2.将下载包放在cygwin安装目录下任意位置,比如home目录下</p><p>2.3.解压haproxy-1.7.5.tar.gz</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tar</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -zxvf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> haproxy-1.7.5.tar.gz</span></span></code></pre></div><p>2.4.进入haproxy解压目录进行安装</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">make</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> TARGET=cygwin</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">make</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span></code></pre></div><h2 id="_3-打包运行-haproxy" tabindex="-1">3.打包运行**haproxy ** <a class="header-anchor" href="#_3-打包运行-haproxy" aria-label="Permalink to &quot;3.打包运行**haproxy **&quot;">​</a></h2><p>3.1.找到在cygwin安装目录中找到haproxy.exe、cyggcc_s-1.dll和cygwin1.dll,新建位置复制放在文件夹内(我的路径是D:/haproxy/下)</p><h2 id="_3-2-创建配置文件-设置对远程桌面端口转发" tabindex="-1">3.2.创建配置文件,设置对远程桌面端口转发 <a class="header-anchor" href="#_3-2-创建配置文件-设置对远程桌面端口转发" aria-label="Permalink to &quot;3.2.创建配置文件,设置对远程桌面端口转发&quot;">​</a></h2><p>haproxy.cfg:</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#haproxy 配置示例</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">global</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  maxconn</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1500</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  nbproc</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  daemon</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">defaults</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        mode</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tcp</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        retries</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        option</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  abortonclose</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        maxconn</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 32000</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        timeout</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> connect</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 300000ms</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        timeout</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> client</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  300000ms</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        timeout</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> server</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  300000ms</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        log</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 127.0.0.1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   local0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> err</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">###</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#监听局域网的192.168.1.17机子的默认远程端口</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">##</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">listen</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> win_17</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        bind</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 0.0.0.0:10008</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #绑定IP:端口</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        mode</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    tcp</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #模式 </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        server</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  s1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 192.168.1.17:3389</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> weight</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> maxconn</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2000</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> inter</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 60s</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #被监听服务器</span></span></code></pre></div><p>3.3.使用以下命令运行</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">haproxy.exe</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> haproxy.cfg</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span></span></code></pre></div>`,22)])])}const c=i(h,[["render",l]]);export{F as __pageData,c as default};
