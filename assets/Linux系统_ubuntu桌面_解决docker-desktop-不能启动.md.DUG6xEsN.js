import{_ as e,c as a,o as t,ag as n}from"./chunks/framework.DWdSXOaE.js";const u=JSON.parse('{"title":"解决ubuntu24-docker-desktop-不能启动","description":"","frontmatter":{},"headers":[],"relativePath":"Linux系统/ubuntu桌面/解决docker-desktop-不能启动.md","filePath":"Linux系统/ubuntu桌面/解决docker-desktop-不能启动.md","lastUpdated":1717593507000}'),i={name:"Linux系统/ubuntu桌面/解决docker-desktop-不能启动.md"};function p(l,s,r,o,d,c){return t(),a("div",null,[...s[0]||(s[0]=[n(`<h1 id="解决ubuntu24-docker-desktop-不能启动" tabindex="-1">解决ubuntu24-docker-desktop-不能启动 <a class="header-anchor" href="#解决ubuntu24-docker-desktop-不能启动" aria-label="Permalink to &quot;解决ubuntu24-docker-desktop-不能启动&quot;">​</a></h1><h2 id="参考" tabindex="-1">参考 <a class="header-anchor" href="#参考" aria-label="Permalink to &quot;参考&quot;">​</a></h2><p><a href="https://askubuntu.com/questions/1511725/ubuntu-24-04-docker-desktop-is-not-starting" target="_blank" rel="noreferrer">https://askubuntu.com/questions/1511725/ubuntu-24-04-docker-desktop-is-not-starting</a></p><h2 id="解决" tabindex="-1">解决 <a class="header-anchor" href="#解决" aria-label="Permalink to &quot;解决&quot;">​</a></h2><p>Creating a new systemd service file:</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nano</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/systemd/system/set-apparmor-restrict.service</span></span></code></pre></div><p>Add the following content:</p><div class="language-text vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>[Unit]</span></span>
<span class="line"><span>Description=Disable AppArmor Restriction on Unprivileged User Namespaces</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[Service]</span></span>
<span class="line"><span>Type=oneshot</span></span>
<span class="line"><span>ExecStart=/sbin/sysctl -w kernel.apparmor_restrict_unprivileged_userns=0</span></span>
<span class="line"><span>RemainAfterExit=true</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[Install]</span></span>
<span class="line"><span>WantedBy=multi-user.target</span></span>
<span class="line"><span>Reload systemd and enable the service:</span></span></code></pre></div><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> daemon-reload</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> enable</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> set-apparmor-restrict.service</span></span></code></pre></div><p>Start the service immediately (optional):</p><p>sudo systemctl start set-apparmor-restrict.service For deleting the service: Disable the service:</p><p>sudo systemctl disable set-apparmor-restrict.service Remove the service file:</p><p><code>sudo rm /etc/systemd/system/set-apparmor-restrict.service</code></p><p>Reload systemd:</p><p><code>sudo systemctl daemon-reload</code></p>`,15)])])}const k=e(i,[["render",p]]);export{u as __pageData,k as default};
