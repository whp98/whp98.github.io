# Frp使用心得

## 前言

最近因为工作需要，使用frp作为内网穿透工具进行windows远程桌面连接。
期间遇到不少问题，采用了不少方法调优，于是写下此文总结下。


## 环境介绍

我的服务器是腾讯云轻量香港。系统是Ubuntu 20.04

Frp 版本用了 0.44.0

## 1.KCP使用

我之前使用的是TCP，用的不多没感觉有问题，但是我最近不知道是不是网络不好，经常断开。于是使用KCP来尝试优化。

启用KCP之后我发现效果并不是那么好。经常内部错误还长时间无法恢复，很坑。

这个有个特点是确实感受到延迟的降低。

期间还用了三方的花生壳和神着互联左临时替代。其实三方其实也挺好了的比较稳定。


## 2.STCP使用

STCP是被控端和使用端都安装一个frpc由FRP来为隧道进行实现，这个方案比之前的直连香港要稳定，但是实际体验还是有长时间断链并且无法恢复的情况发生。

## 3.XTCP使用

这个是打洞，可惜失败了。

## 4.STCP加代理

这个是我目前使用的方案，可能frp本身通信能力有问题，我用将使用端配置上了http代理，当然代理实现是v2实现的，相当于

frpc(控制端) -> v2隧道 -> frps -> frpc(被控端)

这个方案有很厉害的地方
1. 比较稳定
2. 可以把带宽拉上去（直接远程看视频也可）
3. 偶尔卡顿（原先是有的直接跳重连，现在大多情况卡几秒就恢复了）


## 总结
以上就是我目前的体会和经验
要是frp有升级我再尝试优化