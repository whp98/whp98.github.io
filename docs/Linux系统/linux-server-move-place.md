# linux服务器迁移

前几天买了腾讯云合作伙伴推荐的便宜服务器，原来的服务器快到期了，于是将服务迁移到新服务器上。说下我是如何做的。

## 1.列出需要迁移的资源
在原来的服务器上有
1. nginx静态博客
2. 上网（proxy）服务
3. frp内网穿透服务

## 2.判断需要复制哪些文件
按照顺序依次分析
1. nginx博客是github action自动部署上去的这个不用管，到时候地址直接写到这里即可。
2. 上网服务由于不太了解有多少文件，所以使用安装脚本直接在新服务器部署。
3. 我的FRP是我手动安装配置设置systemd的所以这个需要迁移

## 3.使用`ssh-keygen`生成并使用`scp`命令复制文件
ssh-keygen是用来生成ssh密钥对的命令，输入指令之后一路enter
会在当前用户目录下的`.ssh/`（隐藏）目录下生成 id_rsa(私钥)id_rsa.pub(公钥)  
生成完毕之后可以cat id_rsa.pub复制下来，追加到原服务器上的 `~/.ssh/authorized_keys`

在原服务器上重启sshd服务
```sh
systemd restart sshd
```

## 4.使用scp命令复制文件到本服务器上
```sh
scp root@xxx.xxx.xx:/需要复制的目录 本机目录
```
我复制了两个目录
1. frp的安装文件和配置文件
2. systemd目录下的frp.service (可以通过`systemctl status frp`查看问价路径)

## 5.总结
1. linux迁移基本就是文件复制  
2. 复制太麻烦要采用简化措施，比如重装，或者只转移重要文件  
3. 还有一种就是暴力点的就是开一台新服务器（干净的）直接将重点目录全盘复制过来